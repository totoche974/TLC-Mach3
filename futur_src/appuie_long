
unsigned char compteur, key, mem_etat;
unsigned short current_millis, elasped_millis, mem_first_millis, mem_next_millis;

 
if ( key == 7 ) {
     
    current_millis = millis();
     
    if ( mem_etat == HIGH ) {
        mem_first_millis = current_millis
        mem_next_millis  = current_millis;
    }
     
    if ( current_millis >= mem_next_millis ) {
         
        elasped_millis = ( mem_first_millis - current_millis );
         
        if ( elasped_millis < 5000 ) {
            mem_next_millis = ( current_millis + 1000 );
            } 
            else { mem_next_millis = ( current_millis + 500 ); }
         
        compteur++;
         
    }
 
}
 
mem_etat = key;